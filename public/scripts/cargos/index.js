function cargarGrillaCargos(e){var a={datatype:"json",datafields:[{name:"id",type:"number"},{name:"organigrama_resolucion_ministerial_id",type:"number"},{name:"organigrama_tipo_resolucion",type:"string"},{name:"escala_resolucion_ministerial_id",type:"number"},{name:"escala_tipo_resolucion",type:"string"},{name:"unidad_administrativa",type:"string"},{name:"organigrama_id",type:"string"},{name:"depende_id",type:"number"},{name:"codigo_nivel",type:"string"},{name:"nivelsalarial_id",type:"string"},{name:"denominacion",type:"string"},{name:"codigo",type:"string"},{name:"ordenador",type:"number"},{name:"cargo",type:"string"},{name:"sueldo"},{name:"fin_partida_id"},{name:"estado",type:"string"},{name:"condicion",type:"string"},{name:"partida_denominacion",type:"string"},{name:"partida",type:"number"},{name:"fuente_codigo",type:"number"},{name:"fuente",type:"string"},{name:"organismo_codigo",type:"number"},{name:"organismo",type:"string"},{name:"asistente",type:"number"},{name:"jefe",type:"number"},{name:"gestion",type:"number"}],url:"/cargos/list/",async:!1,cache:!1,root:"Rows",beforeprocessing:function(e){a.totalrecords=e[0].TotalRows},filter:function(){$("#divGrillaCargos").jqxGrid("updatebounddata","filter")},sort:function(){$("#divGrillaCargos").jqxGrid("updatebounddata","sort")}},i=new $.jqx.dataAdapter(a);$("#divGrillaCargos").jqxGrid("applyfilters");var t,o,r,n,d,l,c=(t=new $.jqx.filter,o=$("#organigrama_tipo_resolucion").val(),r=t.createfilter("stringfilter",o,"equal"),t.addfilter(1,r),t),s=(n=new $.jqx.filter,d=$("#gestion").val(),l=n.createfilter("numericfilter",d,"equal"),n.addfilter(1,l),n),u=obtenerFiltrables(),g=u.resoluciones,p=u.organigramas,f=u.gestiones,m=u.condiciones;$("#divGrillaCargos").jqxGrid({width:"100%",source:i,sortable:!0,altRows:!0,columnsresize:!0,pageable:!0,pagerMode:"advanced",showfilterrow:!0,filterable:!0,autorowheight:!0,autoshowfiltericon:!1,virtualmode:!0,showtoolbar:!0,rendergridrows:function(e){return e.data},enablebrowserselection:!0,rendertoolbar:function(e){var a=$("<div></div>");e.append(a),a.append("<button title='Nuevo registro' id='addnewrowbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-plus-square fa-2x text-primary' title='Nuevo Registro'/></i></button>"),a.append("<button title='Modificar registro' id='updaterowbutton'  class='btn btn-sm btn-primary' type='button' ><i class='fa fa-pencil-square fa-2x text-info' title='Modificar registro'/></button>"),a.append("<button title='Dar de baja al registro' id='deleterowbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-minus-square fa-2x text-danger' title='Dar de baja al registro'/></i></button>"),a.append("<button title='Asignar PAC' id='assignpacrowbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-bookmark fa-2x text-warning' title='Asignar PAC-P'/></i></button>"),a.append("<button title='Copiar cargo' id='copyrowbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-files-o fa-2x text-info' title='Copiar cargo'/></i></button>"),a.append("<button title='Exportar a Excel.' id='exportexcelrowbutton' class='btn btn-sm btn-primary' type='button'><i class='fi fi-xls fa-2x text-success' title='Exportar a Excel.'/></i></button>"),a.append("<button title='Exportar a PDF.' id='exportpdfrowbutton' class='btn btn-sm btn-primary' type='button'><i class='fi fi-pdf fa-2x text-danger' title='Exportar a PDF.'/></i></button>"),a.append("<button title='Refrescar Grilla' id='refreshbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-repeat fa-2x text-default' title='Refrescar grilla'/></i></button>"),a.append("<button title='Desagrupar' id='cleargroupsrowbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-chain-broken fa-2x text-default' title='Desagrupar'/></i></button>"),a.append("<button title='Desfiltrar' id='clearfiltersrowbutton' class='btn btn-sm btn-primary' type='button'><i class='gi gi-sorting fa-2x text-default' title='Desfiltrar'/></i></button>"),$("#addnewrowbutton").jqxButton(),$("#updaterowbutton").jqxButton(),$("#deleterowbutton").jqxButton(),$("#assignpacrowbutton").jqxButton(),$("#copyrowbutton").jqxButton(),$("#exportexcelrowbutton").jqxButton(),$("#exportpdfrowbutton").jqxButton(),$("#refreshbutton").jqxButton(),$("#cleargroupsrowbutton").jqxButton(),$("#clearfiltersrowbutton").jqxButton(),$("#addnewrowbutton").off(),$("#addnewrowbutton").on("click",function(){$("#titulo").text("Adicionar"),$("#id").val(""),$("#codigo").val(""),$("#ordenador").val(""),$("#organigrama_id").val(""),$("#depende_id").val(""),$("#fin_partida_id").val(""),$("#codigo_nivel").val(""),$("#cargo").val(""),$("#formacion_requerida").val(""),$("#sueldotxt").text(""),$("#myModal").off(),$("#myModal").modal("show"),$("#myModal").on("shown.bs.modal",function(){$("#resolucion_ministerial_id").focus(),$("#id_resolucion_escala").off(),$("#id_resolucion_escala").on("change",function(){console.log("cambio de resolución de escala por registro"),select_escala($(this).val(),0)})})}),$("#updaterowbutton").off(),$("#updaterowbutton").on("click",function(){var e=$("#divGrillaCargos").jqxGrid("getselectedrowindex");if(0<=e){var a=$("#divGrillaCargos").jqxGrid("getrowdata",e);if(null!=a)$("#titulo").text("Editar"),$("#cargo_id_pac").val(a.id),$("#estado_cargo").val(a.estado),$("#formacion_requerida").text(a.formacion_requerida),$("#asistente0").prop("checked",!0),1==a.asistente&&$("#asistente1").prop("checked",!0),$("#jefe0").prop("checked",!0),1==a.jefe&&$("#jefe1").prop("checked",!0),$("#id").val(a.id),$("#gestion_fp").val(a.gestion),select_finpartidas(a.fin_partida_id),select_organigrama(a.organigrama_id),select_dependencia(a.organigrama_id,a.depende_id,a.gestion),select_resoluciones_escala(a.escala_resolucion_ministerial_id),select_escala(a.escala_resolucion_ministerial_id,a.nivelsalarial_id),$("#depende_id").val(a.depende_id),$("#codigo_nivel").val(a.nivelsalarial_id),$("#nivel").val(a.codigo_nivel),$("#codigo").val(a.codigo),$("#ordenador").val(a.ordenador),$("#cargo").val(a.cargo),$("#formacion_requerida").val(a.formacion_requerida),$("#sueldotxt").text(a.sueldo),$("#myModal").off(),$("#myModal").modal("show"),$("#myModal").on("shown.bs.modal",function(){$("#fin_partida_id").focus(),console.log("rm org: "+a.resolucion_ministerial_id),$("#resolucion_ministerial_id").val(a.resolucion_ministerial_id),$("#id_resolucion_escala").off(),$("#id_resolucion_escala").on("change",function(){console.log("cambio de resolución de escala por edicion -> "+$(this).val()),select_escala($(this).val(),0)})});else{var i="Error al seleccionar el cargo.";$("#divMsjePorWarning").html(""),$("#divMsjePorWarning").append(i),$("#divMsjeNotificacionWarning").jqxNotification("open")}}else{i="Debe seleccionar un registro necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(i),$("#divMsjeNotificacionError").jqxNotification("open")}}),$("#deleterowbutton").off(),$("#deleterowbutton").on("click",function(){var e=$("#divGrillaCargos").jqxGrid("getselectedrowindex");if(0<=e){var a=$("#divGrillaCargos").jqxGrid("getrowdata",e);if(null!=a)bootbox.confirm("<strong>¡Mensaje!</strong> Esta seguro de eliminar el registro.",function(e){if(!0===e)$.ajax({url:"/cargos/delete/",type:"POST",datatype:"json",data:{id:a.id},success:function(e){$("#divGrillaCargos").jqxGrid("updatebounddata","cells"),$("#divMsjeExito").show(),$("#divMsjeExito").addClass("alert alert-warning alert-dismissable"),$("#aMsjeExito").html(e)},error:function(){alert("Se ha producido un error Inesperado")}})});else{var i="Error al seleccionar el cargo.";$("#divMsjePorWarning").html(""),$("#divMsjePorWarning").append(i),$("#divMsjeNotificacionWarning").jqxNotification("open")}}else{i="Debe seleccionar un registro necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(i),$("#divMsjeNotificacionError").jqxNotification("open")}}),$("#assignpacrowbutton").off(),$("#assignpacrowbutton").on("click",function(){var e=$("#divGrillaCargos").jqxGrid("getselectedrowindex");if(0<=e){var a=$("#divGrillaCargos").jqxGrid("getrowdata",e);if(null!=a)if($("#cargo_id_pac").val(a.id),$("#estado_cargo").val(a.estado),$("#organigrama_pac").text(a.unidad_administrativa),$("#item_pac").text(a.codigo),$("#cargo_pac").text(a.cargo),$("#sueldo_pac").text(a.sueldo+" Bs."),"ADJUDICADO"==a.estado)bootbox.alert("<strong>¡Mensaje!</strong> El cargo ya esta ADJUDICADO.");else $.ajax({url:"/cargos/getEstadoSeguimiento/",type:"POST",datatype:"json",data:{cargo_id:a.id},success:function(e){1==e||0==e?bootbox.alert("<strong>¡Mensaje!</strong> El cargo ya esta en proceso o esta en el PACP."):$("#myModal_pac").modal("show")},error:function(){alert("Se ha producido un error Inesperado")}});else{var i="Error al seleccionar el cargo.";$("#divMsjePorWarning").html(""),$("#divMsjePorWarning").append(i),$("#divMsjeNotificacionWarning").jqxNotification("open")}}else{i="Debe seleccionar un registro necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(i),$("#divMsjeNotificacionError").jqxNotification("open")}}),$("#copyrowbutton").off(),$("#copyrowbutton").on("click",function(){var e=$("#divGrillaCargos").jqxGrid("getselectedrowindex");if(0<=e){var a=$("#divGrillaCargos").jqxGrid("getrowdata",e);if(null!=a)$("#titulo").text("Copiar Cargo"),$("#cargo_id_pac").val(a.id),$("#estado_cargo").val(a.estado),$("#formacion_requerida").text(a.formacion_requerida),$("#asistente0").prop("checked",!0),1==a.asistente&&$("#asistente1").prop("checked",!0),$("#jefe0").prop("checked",!0),1==a.jefe&&$("#jefe1").prop("checked",!0),$("#id").val(""),$("#resolucion_ministerial_id").val(a.resolucion_ministerial_id),$("#gestion_fp").val(a.gestion),select_finpartidas(a.fin_partida_id),select_organigrama(a.organigrama_id),select_resoluciones_escala(a.escala_resolucion_ministerial_id),select_dependencia(a.organigrama_id,a.depende_id,a.gestion),select_escala(a.escala_resolucion_ministerial_id,a.nivelsalarial_id),$("#depende_id").val(a.depende_id),$("#codigo_nivel").val(a.nivelsalarial_id),$("#nivel").val(a.codigo_nivel),$("#codigo").val(a.codigo),$("#ordenador").val(a.ordenador),$("#cargo").val(a.cargo),$("#formacion_requerida").val(a.formacion_requerida),$("#sueldotxt").text(a.sueldo),$("#myModal").modal("show");else{var i="Error al seleccionar el cargo.";$("#divMsjePorWarning").html(""),$("#divMsjePorWarning").append(i),$("#divMsjeNotificacionWarning").jqxNotification("open")}}else{i="Debe seleccionar un registro necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(i),$("#divMsjeNotificacionError").jqxNotification("open")}}),$("#exportexcelrowbutton").off(),$("#exportexcelrowbutton").on("click",function(){exportarReporte(1)}),$("#exportpdfrowbutton").off(),$("#exportpdfrowbutton").on("click",function(){exportarReporte(2)}),$("#refreshbutton").on("click",function(){$("#divGrillaCargos").jqxGrid("updatebounddata")}),$("#cleargroupsrowbutton").off(),$("#cleargroupsrowbutton").on("click",function(){$("#divGrillaCargos").jqxGrid("cleargroups")}),$("#clearfiltersrowbutton").off(),$("#clearfiltersrowbutton").on("click",function(){$("#divGrillaCargos").jqxGrid("clearfilters")})},columns:[{text:"Nro.",sortable:!1,filterable:!1,editable:!1,groupable:!1,draggable:!1,resizable:!1,columntype:"number",pinned:!0,width:50,cellsalign:"center",align:"center",cellsrenderer:rownumberrenderer},{text:"Resolución (Organigrama)",datafield:"organigrama_tipo_resolucion",filtertype:"checkedlist",align:"center",filteritems:g,filter:c,hidden:e.hdnResolucionOrganigrama.hidden,width:"10%"},{text:"Resolución (Escala)",datafield:"escala_tipo_resolucion",filtertype:"checkedlist",align:"center",filteritems:g,hidden:e.hdnResolucionEscala.hidden,width:"10%"},{text:"Unidad Organizacional",datafield:"unidad_administrativa",filtertype:"checkedlist",align:"center",filteritems:p,hidden:e.hdnUnidadOrganizacional.hidden,width:"10%"},{text:"Denominacion",datafield:"denominacion",filtertype:"input",align:"center",hidden:e.hdnDenominacion.hidden,width:"15%"},{text:"Ordenador",datafield:"ordenador",filtertype:"number",align:"center",cellsalign:"center",hidden:e.hdnOrdenador.hidden,width:"4%"},{text:"Cargo",datafield:"cargo",filtertype:"input",align:"center",hidden:e.hdnCargo.hidden,width:"12%"},{text:"Salario Mensual",datafield:"sueldo",filtertype:"input",width:"5%",cellsformat:"c2",cellsalign:"right",hidden:e.hdnSalario.hidden,align:"center"},{text:"Item",datafield:"codigo",filtertype:"input",align:"center",cellsalign:"center",hidden:e.hdnItem.hidden,width:"4%"},{text:"Estado",datafield:"estado",filtertype:"input",align:"center",hidden:e.hdnEstado.hidden,width:"7%"},{text:"Condici&oacute;n",datafield:"condicion",filtertype:"checkedlist",filteritems:m,hidden:e.hdnCondicion.hidden,align:"center",width:"10%"},{text:"Partida",datafield:"partida",filtertype:"input",align:"center",cellsalign:"center",hidden:e.hdnPartida.hidden,width:"4%"},{text:"Fnt",datafield:"fuente_codigo",filtertype:"number",align:"center",cellsalign:"center",hidden:e.hdnCodFuente.hidden,width:"3%"},{text:"Org",datafield:"organismo_codigo",filtertype:"number",align:"center",cellsalign:"center",hidden:e.hdnCodOrganismo.hidden,width:"3%"},{text:"Gestión",datafield:"gestion",filtertype:"checkedlist",width:"3%",align:"center",cellsalign:"center",filteritems:f,filter:s,hidden:e.hdnGestion.hidden}]}),$("#add_pac").click(function(){var e=$("#divGrillaCargos").jqxGrid("getselectedrowindex");if(-1<e){var a=$("#divGrillaCargos").jqxGrid("getrowdata",e);if($("#cargo_id_pac").val(a.id),$("#estado_cargo").val(a.estado),$("#organigrama_pac").text(a.unidad_administrativa),$("#item_pac").text(a.codigo),$("#cargo_pac").text(a.cargo),$("#sueldo_pac").text(a.sueldo+" Bs."),"ADJUDICADO"==a.estado)bootbox.alert("<strong>¡Mensaje!</strong> El cargo ya esta ADJUDICADO.");else $.ajax({url:"/cargos/getEstadoSeguimiento/",type:"POST",datatype:"json",data:{cargo_id:a.id},success:function(e){1==e||0==e?bootbox.alert("<strong>¡Mensaje!</strong> El cargo ya esta en proceso o esta en el PACP."):$("#myModal_pac").modal("show")},error:function(){alert("Se ha producido un error Inesperado")}})}else bootbox.alert("<strong>¡Mensaje!</strong> Para asignar PACP debe seleccionar un registro.")})}function cargarGrillaPac(){var a={datatype:"json",datafields:[{name:"nro",type:"number"},{name:"id",type:"number"},{name:"organigrama_tipo_resolucion",type:"string"},{name:"escala_tipo_resolucion",type:"string"},{name:"unidad_administrativa",type:"string"},{name:"codigo",type:"string"},{name:"cargo",type:"string"},{name:"estado",type:"string"},{name:"gestion",type:"string"},{name:"fecha_ini",type:"date"},{name:"fecha_fin",type:"date"}],url:"/cargos/listpacpaged/",async:!1,cache:!1,root:"Rows",beforeprocessing:function(e){a.totalrecords=e[0].TotalRows},filter:function(){$("#jqxgrid2").jqxGrid("updatebounddata","filter")},sort:function(){$("#jqxgrid2").jqxGrid("updatebounddata","sort")}},e=new $.jqx.dataAdapter(a);$("#jqxgrid2").jqxGrid({width:"100%",source:e,sortable:!0,altRows:!0,columnsresize:!0,pageable:!0,pagerMode:"advanced",showfilterrow:!0,filterable:!0,autorowheight:!0,autoshowfiltericon:!1,virtualmode:!0,showtoolbar:!0,rendergridrows:function(e){return e.data},enablebrowserselection:!0,rendertoolbar:function(e){var a=$("<div></div>");e.append(a),a.append("<button title='Dar de baja al registro' id='deletepacrowbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-minus-square fa-2x text-danger' title='Dar de baja al registro'/></i></button>"),a.append("<button title='Exportar a Excel.' id='exportexcelpacprowbutton' class='btn btn-sm btn-primary' type='button'><i class='fi fi-xls fa-2x text-success' title='Exportar a Excel.'/></i></button>"),a.append("<button title='Exportar a PDF.' id='exportpdpacpfrowbutton' class='btn btn-sm btn-primary' type='button'><i class='fi fi-pdf fa-2x text-danger' title='Exportar a PDF.'/></i></button>"),a.append("<button title='Refrescar Grilla' id='refreshpacbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-repeat fa-2x text-default' title='Refrescar grilla.'/></i></button>"),a.append("<button title='Desagrupar' id='cleargroupspacrowbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-chain-broken fa-2x text-default' title='Desagrupar.'/></i></button>"),a.append("<button title='Desfiltrar' id='clearfilterspacrowbutton' class='btn btn-sm btn-primary' type='button'><i class='gi gi-sorting fa-2x text-default' title='Desfiltrar.'/></i></button>"),$("#deletepacrowbutton").jqxButton(),$("#exportpdpacpfrowbutton").jqxButton(),$("#exportexcelpacprowbutton").jqxButton(),$("#refreshpacbutton").jqxButton(),$("#cleargroupspacrowbutton").jqxButton(),$("#clearfilterspacrowbutton").jqxButton(),$("#deletepacrowbutton").off(),$("#deletepacrowbutton").on("click",function(){var e=$("#jqxgrid2").jqxGrid("getselectedrowindex");if(0<=e){var a=$("#jqxgrid2").jqxGrid("getrowdata",e);if(null!=a)bootbox.confirm("<strong>¡Mensaje!</strong> Esta seguro de eliminar el registro.",function(e){if(1==e)$.ajax({url:"/cargos/delete_pac/",type:"POST",datatype:"json",data:{id:a.id},success:function(e){$("#jqxgrid2").jqxGrid("updatebounddata","cells"),$("#divMsjeExito").show(),$("#divMsjeExito").addClass("alert alert-warning alert-dismissable"),$("#aMsjeExito").html(e)},error:function(){alert("Se ha producido un error Inesperado")}})});else{var i="Error al seleccionar el cargo.";$("#divMsjePorWarning").html(""),$("#divMsjePorWarning").append(i),$("#divMsjeNotificacionWarning").jqxNotification("open")}}else{i="Debe seleccionar un registro necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(i),$("#divMsjeNotificacionError").jqxNotification("open")}}),$("#exportexcelpacprowbutton").off(),$("#exportexcelpacprowbutton").on("click",function(){exportarPacReporte(1)}),$("#exportpdpacpfrowbutton").off(),$("#exportpdpacpfrowbutton").on("click",function(){exportarPacReporte(2)}),$("#refreshpacbutton").on("click",function(){$("#jqxgrid2").jqxGrid("updatebounddata")}),$("#cleargroupspacrowbutton").off(),$("#cleargroupspacrowbutton").on("click",function(){$("#jqxgrid2").jqxGrid("cleargroups")}),$("#clearfilterspacrowbutton").off(),$("#clearfilterspacrowbutton").on("click",function(){$("#jqxgrid2").jqxGrid("clearfilters")})},columns:[{text:"Nro.",sortable:!1,filterable:!1,editable:!1,groupable:!1,draggable:!1,resizable:!1,columntype:"number",pinned:!0,width:50,cellsalign:"center",align:"center",cellsrenderer:rownumberrenderer},{text:"Resolución (Organigrama)",datafield:"organigrama_tipo_resolucion",filtertype:"checkedlist",align:"center",width:"10%"},{text:"Resolución (Escala)",datafield:"escala_tipo_resolucion",filtertype:"checkedlist",align:"center",width:"10%"},{text:"Unidad Organizacional",datafield:"unidad_administrativa",filtertype:"checkedlist",align:"center",width:"20%"},{text:"Item",datafield:"codigo",filtertype:"input",align:"center",cellsalign:"center",width:"3%"},{text:"Cargo",datafield:"cargo",filtertype:"input",width:"27%"},{text:"Gestion",datafield:"gestion",filtertype:"number",align:"center",cellsalign:"center",width:"3%"},{text:"Fecha Inicio",datafield:"fecha_ini",filtertype:"range",width:"5%",cellsalign:"center",cellsformat:"dd-MM-yyyy",align:"center"},{text:"Fecha Finalización",datafield:"fecha_fin",filtertype:"range",width:"5%",cellsalign:"center",cellsformat:"dd-MM-yyyy",align:"center"},{text:"Estado",datafield:"estado",filtertype:"input",align:"center",cellsalign:"center",width:"5%"}]}),$("#delete_pac").click(function(){var e=$("#jqxgrid2").jqxGrid("getselectedrowindex");if(-1<e){var a=$("#jqxgrid2").jqxGrid("getrowdata",e);bootbox.confirm("<strong>¡Mensaje!</strong> Esta seguro de eliminar el registro.",function(e){if(1==e)$.ajax({url:"/cargos/delete_pac/",type:"POST",datatype:"json",data:{id:a.id},success:function(e){$("#jqxgrid2").jqxGrid("updatebounddata","cells"),$("#divMsjeExito").show(),$("#divMsjeExito").addClass("alert alert-warning alert-dismissable"),$("#aMsjeExito").html(e)},error:function(){alert("Se ha producido un error Inesperado")}})})}else bootbox.alert("<strong>¡Mensaje!</strong> Seleccionar un registro para eliminar.")})}function obtenerFiltrables(){var a=null;return $.ajax({url:"/cargos/getfilters/",type:"POST",datatype:"json",async:!1,cache:!1,success:function(e){a=jQuery.parseJSON(e)},error:function(){alert("Se ha producido un error Inesperado")}}),a}function select_finpartidas(a){console.log("fin_partida_id:"+a),$.post("/cargos/select_finpartidas/",function(e){$("#fin_partida_id").html(e),$("#fin_partida_id").val(a)})}function select_fuentefinanciamiento(a){console.log("fin_partida_id:"+a),$("#resolucion_ministerial_id option:selected").each(function(){elegido=$(this).val(),$.post("/cargos/select_fuentefinanciamiento/",{elegido:elegido},function(e){$("#fin_partida_id").html(e),$("#fin_partida_id").val(a)})})}function select_organigrama(a){console.log("organigrama prefijado: "+a),$("#resolucion_ministerial_id option:selected").each(function(){elegido=$(this).val(),$.post("/cargos/select_organigrama/",{elegido:elegido},function(e){$("#organigrama_id").html(e),$("#organigrama_id").val(a)})})}function select_resoluciones_escala(a){$.post("/cargos/select_resoluciones_escala/",function(e){$("#id_resolucion_escala").html(e),$("#id_resolucion_escala").val(a)})}function select_escala(e,a){$("#id_resolucion_escala option:selected").each(function(){id=$(this).val(),$.post("/cargos/select_escala/",{id_r:e},function(e){$("#codigo_nivel").html(e),$("#codigo_nivel").val(a)})})}function select_dependencia(e,a,i){$.post("/cargos/select_dependencia/",{elegido:e,gestion:i},function(e){$("#depende_id").html(e),$("#depende_id").val(a)})}function exportarPacReporte(e){columna=new Object,filtros=new Object,agrupados=new Object,ordenados=new Object,organigrama_tipo_resolucion=$("#jqxgrid2").jqxGrid("getcolumn","organigrama_tipo_resolucion"),escala_tipo_resolucion=$("#jqxgrid2").jqxGrid("getcolumn","escala_tipo_resolucion"),unidad_administrativa=$("#jqxgrid2").jqxGrid("getcolumn","unidad_administrativa"),codigo=$("#jqxgrid2").jqxGrid("getcolumn","codigo"),cargo=$("#jqxgrid2").jqxGrid("getcolumn","cargo"),gestion=$("#jqxgrid2").jqxGrid("getcolumn","gestion"),fecha_ini=$("#jqxgrid2").jqxGrid("getcolumn","fecha_ini"),fecha_fin=$("#jqxgrid2").jqxGrid("getcolumn","fecha_fin"),estado=$("#jqxgrid2").jqxGrid("getcolumn","estado"),columna[organigrama_tipo_resolucion.datafield]={text:organigrama_tipo_resolucion.text,hidden:organigrama_tipo_resolucion.hidden},columna[escala_tipo_resolucion.datafield]={text:escala_tipo_resolucion.text,hidden:escala_tipo_resolucion.hidden},columna[unidad_administrativa.datafield]={text:unidad_administrativa.text,hidden:unidad_administrativa.hidden},columna[codigo.datafield]={text:codigo.text,hidden:codigo.hidden},columna[cargo.datafield]={text:cargo.text,hidden:cargo.hidden},columna[gestion.datafield]={text:gestion.text,hidden:gestion.hidden},columna[fecha_ini.datafield]={text:fecha_ini.text,hidden:fecha_ini.hidden},columna[fecha_fin.datafield]={text:fecha_fin.text,hidden:fecha_fin.hidden},columna[estado.datafield]={text:estado.text,hidden:estado.hidden};var a=$("#jqxgrid2").jqxGrid("groups");null!=a&&""!=a||(a="null"),ordenados="";var i=$("#jqxgrid2").jqxGrid("getsortinformation");if(null!=i.sortcolumn){var t=i.sortcolumn,o=i.sortdirection;ordenados[t]={asc:o.ascending,desc:o.descending}}for(var r=$("#jqxgrid2").jqxGrid("getrows"),n=$("#jqxgrid2").jqxGrid("getfilterinformation"),d=0,l=0;l<n.length;l++)for(var c=n[l],s=c.filter.getfilters(),u=0;u<s.length;u++){0<u&&d++,filtros[l+d]={columna:c.filtercolumn,valor:s[u].value,condicion:s[u].condition,tipo:s[u].type}}var g=r.length,p=JSON.stringify(filtros),f=JSON.stringify(columna),m=JSON.stringify(ordenados);f=btoa(utf8_encode(f)),p=btoa(utf8_encode(p)),m=btoa(utf8_encode(m));var _=btoa(utf8_encode(a));f=f.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,""),p=p.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,""),_=_.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,""),m=m.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"");var x="";switch(e){case 1:x="/cargos/exportarPacExcel/";break;case 2:x="/cargos/exportarPacPdf/"}""!=x&&window.open(x+g+"/"+f+"/"+p+"/"+_+"/"+m,"_blank")}function exportarReporte(e){columna=new Object,filtros=new Object,agrupados=new Object,ordenados=new Object,organigrama_tipo_resolucion=$("#divGrillaCargos").jqxGrid("getcolumn","organigrama_tipo_resolucion"),escala_tipo_resolucion=$("#divGrillaCargos").jqxGrid("getcolumn","escala_tipo_resolucion"),unidad_administrativa=$("#divGrillaCargos").jqxGrid("getcolumn","unidad_administrativa"),denominacion=$("#divGrillaCargos").jqxGrid("getcolumn","denominacion"),ordenador=$("#divGrillaCargos").jqxGrid("getcolumn","ordenador"),cargo=$("#divGrillaCargos").jqxGrid("getcolumn","cargo"),sueldo=$("#divGrillaCargos").jqxGrid("getcolumn","sueldo"),codigo=$("#divGrillaCargos").jqxGrid("getcolumn","codigo"),estado=$("#divGrillaCargos").jqxGrid("getcolumn","estado"),condicion=$("#divGrillaCargos").jqxGrid("getcolumn","condicion"),partida=$("#divGrillaCargos").jqxGrid("getcolumn","partida"),fuente_codigo=$("#divGrillaCargos").jqxGrid("getcolumn","fuente_codigo"),fuente=$("#divGrillaCargos").jqxGrid("getcolumn","fuente"),organismo_codigo=$("#divGrillaCargos").jqxGrid("getcolumn","organismo_codigo"),organismo=$("#divGrillaCargos").jqxGrid("getcolumn","organismo"),gestion=$("#divGrillaCargos").jqxGrid("getcolumn","gestion"),columna[organigrama_tipo_resolucion.datafield]={text:organigrama_tipo_resolucion.text,hidden:organigrama_tipo_resolucion.hidden},columna[escala_tipo_resolucion.datafield]={text:escala_tipo_resolucion.text,hidden:escala_tipo_resolucion.hidden},columna[unidad_administrativa.datafield]={text:unidad_administrativa.text,hidden:unidad_administrativa.hidden},columna[denominacion.datafield]={text:denominacion.text,hidden:denominacion.hidden},columna[ordenador.datafield]={text:ordenador.text,hidden:ordenador.hidden},columna[cargo.datafield]={text:cargo.text,hidden:cargo.hidden},columna[sueldo.datafield]={text:sueldo.text,hidden:sueldo.hidden},columna[codigo.datafield]={text:codigo.text,hidden:codigo.hidden},columna[estado.datafield]={text:estado.text,hidden:estado.hidden},columna[condicion.datafield]={text:condicion.text,hidden:condicion.hidden},columna[partida.datafield]={text:partida.text,hidden:partida.hidden},columna[fuente_codigo.datafield]={text:fuente_codigo.text,hidden:fuente_codigo.hidden},columna[fuente.datafield]={text:fuente.text,hidden:fuente.hidden},columna[organismo_codigo.datafield]={text:organismo_codigo.text,hidden:organismo_codigo.hidden},columna[organismo.datafield]={text:organismo.text,hidden:organismo.hidden},columna[gestion.datafield]={text:gestion.text,hidden:gestion.hidden};var a=$("#divGrillaCargos").jqxGrid("groups");null!=a&&""!=a||(a="null");var i=$("#divGrillaCargos").jqxGrid("getsortinformation");if(null!=i.sortcolumn){var t=i.sortcolumn,o=i.sortdirection;ordenados[t]={desc:o.ascending,asc:o.descending}}else ordenados="";for(var r=$("#divGrillaCargos").jqxGrid("getrows"),n=$("#divGrillaCargos").jqxGrid("getfilterinformation"),d=0,l=0;l<n.length;l++)for(var c=n[l],s=c.filter.getfilters(),u=0;u<s.length;u++){0<u&&d++,filtros[l+d]={columna:c.filtercolumn,valor:s[u].value,condicion:s[u].condition,tipo:s[u].type}}var g=r.length,p=JSON.stringify(filtros),f=JSON.stringify(columna),m=JSON.stringify(ordenados);f=btoa(utf8_encode(f)),p=btoa(utf8_encode(p)),m=btoa(utf8_encode(m));var _=btoa(utf8_encode(a));f=f.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,""),p=p.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,""),_=_.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,""),m=m.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"");var x="";switch(e){case 1:x="/cargos/exportarExcel/";break;case 2:x="/cargos/exportarPdf/"}""!=x&&window.open(x+g+"/"+f+"/"+p+"/"+_+"/"+m,"_blank")}$(document).ready(function(){$("#codigo_nivel").change("select",function(e){$.ajax({url:"/cargos/getSueldo/",type:"POST",datatype:"json",data:{id:$("#codigo_nivel").val()},success:function(e){var a=jQuery.parseJSON(e);$("#sueldotxt").text(a.sueldo),$("#nivel").val(a.nivel)},error:function(){alert("Se ha producido un error Inesperado")}})});var e={hdnResolucionOrganigrama:{title:"ResolucionOrganigrama",selectable:!1,hidden:!1},hdnResolucionEscala:{title:"ResolucionEscala",selectable:!0,hidden:!0},hdnUnidadOrganizacional:{title:"UnidadOrganizacional",selectable:!1,hidden:!1},hdnDenominacion:{title:"Denominacion",selectable:!1,hidden:!1},hdnOrdenador:{title:"Ordenador",selectable:!0,hidden:!0},hdnCargo:{title:"Cargo",selectable:!1,hidden:!1},hdnSalario:{title:"Salario",selectable:!1,hidden:!1},hdnItem:{title:"Item",selectable:!1,hidden:!1},hdnEstado:{title:"Estado",selectable:!0,hidden:!0},hdnCondicion:{title:"Condicion",selectable:!1,hidden:!1},hdnPartida:{title:"Partida",selectable:!1,hidden:!1},hdnCodFuente:{title:"Cod. Fuente",selectable:!0,hidden:!0},hdnCodOrganismo:{title:"Cod Organismo",selectable:!0,hidden:!0},hdnGestion:{title:"Gestión",selectable:!1,hidden:!1}};defineColumnasOcultas("divGrillaCargos","divComboColumnasVisibles","chkAllColumnasVisibles",e),cargarGrillaCargos(e),cargarGrillaPac(),$("#resolucion_ministerial_id").change(function(){select_organigrama(),$("#depende_id").html("")}),$("#organigrama_id").change(function(){select_dependencia($("#organigrama_id").val(),0,$("#gestion_fp").val())}),$("#id_resolucion_escala").on("change",function(){select_escala($(this).val())}),$("#fin_partida_id").change(function(){$.ajax({url:"/cargos/getGestion/",type:"POST",datatype:"json",data:{fin_partida_id:$(this).val()},success:function(e){var a=jQuery.parseJSON(e);$("#gestion_fp").val(a.gestion),select_dependencia($("#organigrama_id").val(),0,a.gestion)},error:function(){alert("Se ha producido un error Inesperado")}})}),select_organigrama(),select_finpartidas(0),$("#testForm").validate({rules:{organigrama_id:{required:!0},codigo_nivel:{required:!0},cargo:{required:!0},fin_partida_id:{required:!0}},highlight:function(e){$(e).closest(".control-group").removeClass("success").addClass("error")},success:function(e){e.addClass("valid").closest(".control-group").removeClass("error").addClass("success")},submitHandler:function(e){var a=$("input:radio[name=asistente]:checked").val(),i=$("input:radio[name=jefe]:checked").val();$.ajax({url:"/cargos/save/",type:"POST",datatype:"json",data:{id:$("#id").val(),resolucion_ministerial_id:$("#resolucion_ministerial_id").val(),organigrama_id:$("#organigrama_id").val(),fin_partida_id:$("#fin_partida_id").val(),depende_id:$("#depende_id").val(),cargo:$("#cargo").val(),nivel:$("#nivel").val(),codigo_nivel:$("#codigo_nivel").val(),codigo:$("#codigo").val(),ordenador:$("#ordenador").val(),formacion_requerida:$("#formacion_requerida").val(),asistente:a,jefe:i,gestion_fp:$("#gestion_fp").val()},success:function(e){$("#divGrillaCargos").jqxGrid("updatebounddata","cells"),$("#divMsjeExito").show(),$("#divMsjeExito").addClass("alert alert-sucess alert-dismissable"),$("#aMsjeExito").html(e)},error:function(){alert("Se ha producido un error Inesperado")}});return $("#myModal").modal("hide"),!1}}),$("#testForm_pac").validate({rules:{gestion_pac:{required:!0}},highlight:function(e){$(e).closest(".control-group").removeClass("success").addClass("error")},success:function(e){e.addClass("valid").closest(".control-group").removeClass("error").addClass("success")},submitHandler:function(e){var a=$("#fecha_ini_pac").val(),i=$("#fecha_fin_pac").val();return $.ajax({url:"/cargos/save_pac/",type:"POST",datatype:"json",data:{cargo_id_pac:$("#cargo_id_pac").val(),gestion:$("#gestion_pac").val(),fecha_ini:a,fecha_fin:i},success:function(e){$("#jqxgrid2").jqxGrid("updatebounddata","cells"),$("#divMsjeExito").show(),$("#divMsjeExito").addClass("alert alert-sucess alert-dismissable"),$("#aMsjeExito").html(e)},error:function(){alert("Se ha producido un error Inesperado")}}),$("#myModal_pac").modal("hide"),!1}}),$("#rep_pdf_pac").click(function(){exportarPacReporte(2)})});var rownumberrenderer=function(e,a,i,t,o,r){return"<div align='center'>"+(e+1)+"</div>"};