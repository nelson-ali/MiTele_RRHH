function definirGrillaParaSeleccionarCargoAcefaloParaEditar(a,e,t){var o=$("#lstGestion").val(),r={datatype:"json",datafields:[{name:"seleccionable",type:"string"},{name:"codigo",type:"string"},{name:"id_condicion",type:"string"},{name:"condicion",type:"string"},{name:"id_cargo",type:"string"},{name:"gerencia_administrativa",type:"string"},{name:"departamento_administrativo",type:"string"},{name:"nivelsalarial",type:"string"},{name:"cargo",type:"string"},{name:"sueldo",type:"number"},{name:"asistente",type:"integer"},{name:"jefe",type:"integer"},{name:"id_resolucion_ministerial",type:"integer"},{name:"resolucion_ministerial",type:"string"},{name:"nivelsalarial_resolucion_id",type:"integer"},{name:"nivelsalarial_resolucion",type:"string"},{name:"gestion",type:"string"}],url:"/relaborales/listcargosbygestion?gestion="+o,cache:!1,root:"Rows",beforeprocessing:function(a){r.totalrecords=a[0].TotalRows},filter:function(){$("#divGrillaParaSeleccionarCargo").jqxGrid("updatebounddata","filter")},sort:function(){$("#divGrillaParaSeleccionarCargo").jqxGrid("updatebounddata","sort")}},n=new $.jqx.dataAdapter(r);!function(){var a=(new Date).getFullYear(),e=[];if(0==o)for(var r=0,i=2014;i<=a;i++)e[r]=i+"",r++;$("#divGrillaParaSeleccionarCargo").jqxGrid({width:"100%",height:"100%",source:n,sortable:!0,altRows:!0,groupable:!1,columnsresize:!0,pageable:!0,pagerMode:"advanced",showfilterrow:!0,filterable:!0,showtoolbar:!0,autorowheight:!0,enablebrowserselection:!0,virtualmode:!0,rendergridrows:function(a){return a.data},rendertoolbar:function(a){var e=$("<div></div>");a.append(e),e.append("<button title='Refrescar Grilla' id='refreshcgbutton' class='btn btn-sm btn-default' type='button'><i class='fa fa-repeat text-default' title='Refrescar grilla.'/></i></button>"),e.append("<button title='Desfiltrar.' id='clearcgfiltersrowbutton' class='btn btn-sm btn-default' type='button'><i class='gi gi-sorting text-default' title='Desfiltrar.'/></i></button>"),$("#refreshcgbutton").jqxButton(),$("#clearcgfiltersrowbutton").jqxButton(),$("#refreshcgbutton").off(),$("#refreshcgbutton").on("click",function(){$("#divGrillaParaSeleccionarCargo").jqxGrid("updatebounddata")}),$("#clearcgfiltersrowbutton").off(),$("#clearcgfiltersrowbutton").on("click",function(){$("#divGrillaParaSeleccionarCargo").jqxGrid("clearfilters")})},columns:[{text:"Nro.",sortable:!1,filterable:!1,editable:!1,groupable:!1,draggable:!1,resizable:!1,columntype:"number",width:50,cellsalign:"center",align:"center",cellsrenderer:rownumberrenderer},{text:"&Iacute;tem/C&oacute;digo",filtertype:"input",datafield:"codigo",cellsalign:"center",align:"center",width:100},{text:"Gesti&oacute;n",columntype:"textbox",filtertype:"checkedlist",datafield:"gestion",align:"center",width:100},{text:"Cargo",columntype:"textbox",filtertype:"input",datafield:"cargo",align:"center",width:100},{text:"Nivel Salarial",filtertype:"checkedlist",datafield:"nivelsalarial",align:"center",width:200},{text:"Haber",datafield:"sueldo",filtertype:"number",cellsformat:"d",pinned:!1,width:70,cellsalign:"right",align:"center"},{text:"Gerencia",filtertype:"checkedlist",datafield:"gerencia_administrativa",filteritems:t.gerencias,width:220,align:"center",hidden:!1},{text:"Departamento",filtertype:"checkedlist",datafield:"departamento_administrativo",filteritems:t.departamentos,width:220,align:"center",hidden:!1},{text:"Condici&oacute;n",columntype:"textbox",filtertype:"checkedlist",datafield:"condicion",filteritems:t.condiciones,width:150,cellsalign:"center",align:"center",hidden:!1},{text:"Resoluci&oacute;n Organigrama",filtertype:"checkedlist",datafield:"resolucion_ministerial",align:"center",width:200},{text:"Resoluci&oacute;n Escala",filtertype:"checkedlist",datafield:"nivelsalarial_resolucion",align:"center",width:200}]}),$("#divGrillaParaSeleccionarCargo").off(),$("#divGrillaParaSeleccionarCargo").on("rowdoubleclick",function(a){var e=a.args,r=e.rowindex;if(0<=r){var i=$("#divGrillaParaSeleccionarCargo").jqxGrid("getrowdata",r);if(null!=i)agregarCargoSeleccionadoEnGrillaParaEditar(2,i),$("#divEdit").css("height","100%");else{var t="Debe seleccionar un cargo necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(t),$("#divMsjeNotificacionError").jqxNotification("open")}}else{var t="Debe seleccionar un cargo necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(t),$("#divMsjeNotificacionError").jqxNotification("open")}})}()}var rownumberrenderer=function(a,e,r,i,t,o){return"<div align='center'>"+(a+1)+"</div>"};function cargarUbicacionesParaEditar(r){""==r&&(r=0),$("#lstUbicacionesEditar").html("");var i="";$.ajax({url:"/relaborales/listubicaciones",type:"POST",datatype:"json",cache:!1,async:!1,success:function(a){var e=jQuery.parseJSON(a);$.each(e,function(a,e){i=r==e.id?"selected":"",$("#lstUbicacionesEditar").append("<option value="+e.id+" "+i+">"+e.ubicacion+"</option>")})}})}function cargarDepartamentosParaEditar(a){$("#departamentoEditar").jqxComboBox({enableBrowserBoundsDetection:!0,autoDropDownHeight:!0,promptText:"Seleccione un departamento o ciudad",source:[{value:0,label:"La Paz"},{value:1,label:"Cochabamba"},{value:2,label:"Sucre"},{value:3,label:"Oruro"},{value:4,label:"Potos√≠"},{value:5,label:"Santa Cruz"},{value:6,label:"Tarija"},{value:7,label:"Trinidad"},{value:8,label:"Cobija"}],height:22,width:"100%"})}function cargarAreasAdministrativasParaEditar(a,r){$("#divAreasEditar").hide(),$("#lstAreasEditar").html("");var i=!1;return 0<a&&$.ajax({url:"/relaborales/listareas",type:"POST",datatype:"json",async:!1,data:{id_padre:a},success:function(a){var e=jQuery.parseJSON(a);0<e.length&&($("#divAreasEditar").show(),$("#lstAreasEditar").append("<option value='0'>Seleccionar..</option>"),$.each(e,function(a,e){i=!0,r==e.id_area?selected="selected":selected="",$("#lstAreasEditar").append("<option value="+e.id_area+" "+selected+">"+e.unidad_administrativa+"</option>")}))}}),i}function cargarProcesosParaEditar(a,r){$.ajax({url:"/relaborales/listprocesos",type:"POST",datatype:"json",data:{id_condicion:a},success:function(a){var e=jQuery.parseJSON(a);$("#lstProcesosEditar").html(""),$.each(e,function(a,e){r==e.id?$selected="selected":$selected="",$("#lstProcesosEditar").append("<option value="+e.id+" "+$selected+">"+e.codigo_proceso+"</option>")})}})}function cargaCategoriasParaEditar(a){$("#categoriaEditar").jqxComboBox({enableBrowserBoundsDetection:!0,autoDropDownHeight:!0,promptText:"Seleccione una categoria",source:[{value:1,label:"ADMINISTRATIVO"},{value:2,label:"TECNICO"},{value:3,label:"JURIDICO"}],height:22,width:"100%"})}function agregarCargoSeleccionadoEnGrillaParaEditar(a,e){var r=e.id_cargo,i="";i=1==a?e.cargo_codigo:e.codigo;e.id_finpartida,e.finpartida,e.id_resolucion_ministerial;var t=e.cargo_resolucion_ministerial,o=e.id_condicion,n=e.condicion,l=e.id_organigrama,d=e.gerencia_administrativa,s=e.departamento_administrativo,c=e.id_area,h=e.nivelsalarial,u=e.cargo,p=e.sueldo,v=(e.nivelsalarial_resolucion_id,e.nivelsalarial_resolucion),E="";E=1==a?e.cargo_gestion:e.gestion;e.cargo_correlativo;$("#tr_cargo_seleccionado_editar").html("");var g="<td class='text-center'><a class='btn btn-danger btnDescartarCargoSeleccionadoEditar' title='Descartar cargo seleccionado.' data-toggle='tooltip' data-original-title='Descartar' id='btn_editar_"+r+"' alt='Descartar cargo para el contrato'>";g+="<i class='fa fa-times'></i></a></td>";var m="<td class='text-center'>"+i+"</td><td class='text-center'>"+E+"</td><td class='text-center'>"+t+"</td><td class='text-center'>"+v+"</td><td class='text-center'>"+n+"</td><td>"+d+"</td><td>"+s+"</td><td>"+h+"</td><td>"+u+"</td><td class='text-center'>"+p+"</td>";$("#tr_cargo_seleccionado_editar").append(g+m),$("#hdnIdCargoSeleccionadoEditar").val(r),$("#hdnIdOrganigramaSeleccionadoEditar").val(l),$("#hdnIdCondicionEditableSeleccionada").val(o),$("#popupGrillaCargo").modal("hide"),$("#divProcesosEditar").show();cargarAreasAdministrativasParaEditar(l,c);2==(o=parseInt(o))||3==o||7==o?($("#divNumContratosEditar").show(),$("#divFechasFinEditar").show(),$("#FechaFinEditar").jqxDateTimeInput({enableBrowserBoundsDetection:!0,height:24,formatString:"dd-MM-yyyy"}),$("#txtNumContratoEditar").focus()):$("#lstUbicacionesEditar").focus(),$(".btnDescartarCargoSeleccionadoEditar").click(function(){$("#tr_cargo_seleccionado_editar").html(""),$("#hdnIdCargoSeleccionadoEditar").val(0),$("#hdnIdOrganigramaSeleccionadoEditar").val(0),$("#hdnIdCondicionNuevaSeleccionadaEditar").val(0),$("#hdnIdRelaboral").val(0),$("#divProcesosEditar").hide(),$("#divNumContratosEditar").hide(),$("#divFechasFinEditar").hide(),$(".msjs-alert").hide(),$(".div-edit-relab").removeClass("has-error"),$("#helpErrorUbicacionesEditar").html(""),$("#helpErrorProcesosEditar").html(""),$("#helpErrorCategoriasEditar").html(""),$("#divUbicacionesEditar").removeClass("has-error"),$("#divProcesosEditar").removeClass("has-error"),$("#divCategoriasEditar").removeClass("has-error")})}function deshabilitarCamposParaEditarRegistroDeRelacionLaboral(){$("#tr_cargo_seleccionado_editar").html(""),$("#hdnIdPersonaSeleccionadaEditar").val(0),$("#NombreParaEditarRegistro").html("")}function validaFormularioPorEditarRegistro(){var a=!0,e="";$(".msjs-alert").hide(),limpiarMensajesErrorPorValidacionEditarRegistro();var r=$("#hdnIdCondicionEditableSeleccionada").val();r=parseInt(r);var i=$("#lstUbicacionesEditar").val(),t=$("#lstProcesosEditar").val(),o=($("#lstCategoriasEditar").val(),$("#FechaIniEditar").jqxDateTimeInput("getText")),n=$("#FechaIncorEditar").jqxDateTimeInput("getText"),l=null;2!=r&&3!=r&&7!=r||(l=$("#FechaFinEditar").jqxDateTimeInput("getText"));var d=$("#hdnIdCargoSeleccionadoEditar").val(),s=$("#hdnIdRelaboralEditar").val(),c="";0!=s&&null!=s||($("#divMsjeError").show(),$("#divMsjeError").addClass("alert alert-danger alert-dismissable"),c+="Se requiere seleccionar un registro de relaci&oacute;n laboral inicialmente.",a=!1),0!=d&&null!=d||($("#divMsjeError").show(),$("#divMsjeError").addClass("alert alert-danger alert-dismissable"),""!=c&&(c+="<br>"),c+="Debe seleccionar el cargo necesariamente.",a=!1),""!=c&&$("#aMsjeError").html(c),r=parseInt(r);var h=null;null!=o&&""!=o||(a=!1,e="Debe introducir la fecha de inicio.",$("#divFechasIniEditar").addClass("has-error"),$("#helpErrorFechasIniEditar").html(e),null==h&&(h=$("#FechaIni"))),null!=n&&""!=n||(a=!1,e="Debe introducir la fecha de incorporaci&oacute;n.",$("#divFechasIncorEditar").addClass("has-error"),$("#helpErrorFechasIncorEditar").html(e),null==h&&(h=$("#FechaIncorEditar")));return procesaTextoAFecha(n,"-")<procesaTextoAFecha(o,"-")&&(a=!1,e="La fecha de incorporaci&oacute;n debe ser igual o superior a la fecha de inicio.",$("#divFechasIniEditar").addClass("has-error"),$("#divFechasIncorEditar").addClass("has-error"),$("#helpErrorFechasIniEditar").html(e),$("#helpErrorFechasIncorEditar").html(e),null==h&&(h=$("#FechaIniEditar"))),2!=r&&3!=r&&7!=r||(""!=l&&null!=l||(a=!1,e="Debe introducir la fecha de finalizaci&oacute;n del contrato.",$("#divFechasFinEditar").show(),$("#divFechasFinEditar").addClass("has-error"),$("#helpErrorFechasFinEditar").html(e),null==h&&(h=$("#FechaFinEditar"))),procesaTextoAFecha(l,"-")<procesaTextoAFecha(o,"-")&&(a=!1,e="La fecha de inicio no puede ser superior a la fecha de finalizaci&oacute;n.",$("#divFechasIniEditar").show(),$("#divFechasIniEditar").addClass("has-error"),$("#helpErrorFechasIniEditar").html(e),$("#divFechasFinEditar").show(),$("#divFechasFinEditar").addClass("has-error"),$("#helpErrorFechasFinEditar").html(e),null==h&&(h=$("#FechaFinEditar"))),procesaTextoAFecha(l,"-")<procesaTextoAFecha(n,"-")&&(a=!1,e="La fecha de incorporaci&oacute;n no puede ser superior a la fecha de finalizaci&oacute;n.",$("#divFechasIncorEditar").show(),$("#divFechasIncorEditar").addClass("has-error"),$("#helpErrorFechasIncorEditar").html(e),$("#divFechasFinEditar").show(),$("#divFechasFinEditar").addClass("has-error"),$("#helpErrorFechasFinEditar").html(e),null==h&&(h=$("#FechaFinEditar")))),2!=r&&3!=r&&7!=r||(null!=$("#txtNumContratoEditar").val()&&""!=$("#txtNumContratoEditar").val()||(a=!1,e="Debe introducir en n&uacute;mero de contrato necesariamente.",$("#divNumContratosEditar").addClass("has-error"),$("#helpErrorNumContratosEditar").html(e),null==h&&(h=$("#txtNumContratoEditar"))),null!=l&&""!=l||(a=!1,e="Debe introducir la fecha de finalizaci&oacute;n del contrato.",$("#divFechasFinEditar").addClass("has-error"),$("#helpErrorFechasFinEditar").html(e),null==h&&(h=$("#FechaFinEditar")))),""!=i&&null!=i||(a=!1,e="Debe seleccionar la ubicaci&oacute;n de trabajo necesariamente.",$("#divUbicacionesEditar").addClass("has-error"),$("#helpErrorUbicacionesEditar").html(e),null==h&&(h=$("#lstUbicacionesEditar"))),0!=t&&""!=t&&null!=t||(a=!1,e="Debe seleccionar el proceso correspondiente necesariamente.",$("#divProcesosEditar").addClass("has-error"),$("#helpErrorProcesosEditar").html(e),null==h&&(h=$("#lstProcesosEditar"))),null!=h&&h.focus(),a}function limpiarMensajesErrorPorValidacionEditarRegistro(){$("#helpErrorUbicacionesEditar").html(""),$("#helpErrorProcesosEditar").html(""),$("#helpErrorCategoriasEditar").html(""),$("#helpErrorNumContratosEditar").html(""),$("#helpErrorItemsEditar").html(""),$("#helpErrorFechasIniEditar").html(""),$("#helpErrorFechasIncorEditar").html(""),$("#helpErrorFechasFinEditar").html(""),$("#divUbicacionesEditar").removeClass("has-error"),$("#divProcesosEditar").removeClass("has-error"),$("#divCategoriasEditar").removeClass("has-error"),$("#divFechasIniEditar").removeClass("has-error"),$("#divFechasIncorEditar").removeClass("has-error"),$("#divFechasFinEditar").removeClass("has-error"),$("#divNumContratosEditar").removeClass("has-error"),$("#divItemsEditar").removeClass("has-error"),$("#tr_cargo_seleccionado_editar").html("")}function guardarRegistroEditado(){var a=!0,e=$("#hdnIdRelaboralEditar").val(),r=0;null!=$("#lstAreasEditar").val()&&(r=$("#lstAreasEditar").val());var i=$("#hdnIdPersonaSeleccionadaEditar").val(),t=$("#hdnIdCargoSeleccionadoEditar").val(),o=$("#lstUbicacionesEditar").val(),n=$("#lstProcesosEditar").val(),l=$("#hdnIdCondicionEditableSeleccionada").val(),d="",s=null;if(2==l||3==l||7==l){d=$("#txtNumContratoEditar").val();s=$("#FechaFinEditar").jqxDateTimeInput("getText")}var c=$("#FechaIniEditar").jqxDateTimeInput("getText"),h=$("#FechaIncorEditar").jqxDateTimeInput("getText"),u=$("#txtObservacionEditar").val();if(0<e&&0<i&&0<t)a=$.ajax({url:"/relaborales/save/",type:"POST",datatype:"json",async:!1,data:{id:e,id_persona:i,id_cargo:t,num_contrato:d,id_area:r,id_ubicacion:o,id_regional:1,id_procesocontratacion:n,fecha_inicio:c,fecha_incor:h,fecha_fin:s,observacion:u},success:function(a){var e=jQuery.parseJSON(a);$(".msjes").hide(),1==e.result?($("#divMsjePorSuccess").html(""),$("#divMsjePorSuccess").append(e.msj),$("#divMsjeNotificacionSuccess").jqxNotification("open"),$("#jqxTabs").jqxTabs("enableAt",0),$("#jqxTabs").jqxTabs("disableAt",1),$("#jqxTabs").jqxTabs("disableAt",2),$("#jqxTabs").jqxTabs("disableAt",3),deshabilitarCamposParaEditarRegistroDeRelacionLaboral(),$("#jqxgrid").jqxGrid("updatebounddata")):0==e.result?($("#divMsjePorWarning").html(""),$("#divMsjePorWarning").append(e.msj),$("#divMsjeNotificacionWarning").jqxNotification("open")):($("#divMsjePorError").html(""),$("#divMsjePorError").append(e.msj),$("#divMsjeNotificacionError").jqxNotification("open"))},error:function(){alert("Se ha producido un error Inesperado")}});else a=!1;return a}