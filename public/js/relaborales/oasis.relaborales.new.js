function definirGrillaParaSeleccionarCargoAcefalo(e,a,o){var t=$("#lstGestion").val(),r={datatype:"json",datafields:[{name:"seleccionable",type:"string"},{name:"codigo",type:"string"},{name:"id_condicion",type:"string"},{name:"condicion",type:"string"},{name:"id_organigrama",type:"integer"},{name:"id_cargo",type:"string"},{name:"gerencia_administrativa",type:"string"},{name:"departamento_administrativo",type:"string"},{name:"nivelsalarial",type:"string"},{name:"cargo",type:"string"},{name:"sueldo",type:"number"},{name:"asistente",type:"integer"},{name:"jefe",type:"integer"},{name:"id_resolucion_ministerial",type:"integer"},{name:"resolucion_ministerial",type:"string"},{name:"nivelsalarial_resolucion_id",type:"integer"},{name:"nivelsalarial_resolucion",type:"string"},{name:"gestion",type:"integer"},{name:"correlativo",type:"string"}],url:"/relaborales/listcargosbygestion?gestion="+t,cache:!1,root:"Rows",beforeprocessing:function(e){r.totalrecords=e[0].TotalRows},filter:function(){$("#divGrillaParaSeleccionarCargo").jqxGrid("updatebounddata","filter")},sort:function(){$("#divGrillaParaSeleccionarCargo").jqxGrid("updatebounddata","sort")}},n=new $.jqx.dataAdapter(r);!function(){var e=(new Date).getFullYear(),a=[];if(0==t)for(var r=0,i=2014;i<=e;i++)a[r]=i+"",r++;$("#divGrillaParaSeleccionarCargo").jqxGrid({width:"100%",height:"100%",source:n,sortable:!0,altRows:!0,groupable:!1,columnsresize:!0,pageable:!0,pagerMode:"advanced",showfilterrow:!0,filterable:!0,showtoolbar:!0,autorowheight:!0,enablebrowserselection:!0,virtualmode:!0,rendergridrows:function(e){return e.data},rendertoolbar:function(e){var a=$("<div></div>");e.append(a),a.append("<button title='Refrescar Grilla' id='refreshcgbutton' class='btn btn-sm btn-default' type='button'><i class='fa fa-repeat text-default' title='Refrescar grilla.'/></i></button>"),a.append("<button title='Desfiltrar.' id='clearcgfiltersrowbutton' class='btn btn-sm btn-default' type='button'><i class='gi gi-sorting text-default' title='Desfiltrar.'/></i></button>"),$("#refreshcgbutton").jqxButton(),$("#clearcgfiltersrowbutton").jqxButton(),$("#refreshcgbutton").off(),$("#refreshcgbutton").on("click",function(){$("#divGrillaParaSeleccionarCargo").jqxGrid("updatebounddata")}),$("#clearcgfiltersrowbutton").off(),$("#clearcgfiltersrowbutton").on("click",function(){$("#divGrillaParaSeleccionarCargo").jqxGrid("clearfilters")})},columns:[{text:"Nro.",sortable:!1,filterable:!1,editable:!1,groupable:!1,draggable:!1,resizable:!1,columntype:"number",width:50,cellsalign:"center",align:"center",cellsrenderer:rownumberrenderer},{text:"&Iacute;tem/C&oacute;digo",datafield:"codigo",columntype:"textbox",filtertype:"input",align:"center",cellsalign:"center",width:80},{text:"Gestion",columntype:"textbox",filtertype:"checkedlist",filteritems:a,datafield:"gestion",align:"center",cellsalign:"center",width:50},{text:"Cargo",columntype:"textbox",filtertype:"input",datafield:"cargo",align:"center",width:200},{text:"Nivel Salarial",filtertype:"checkedlist",datafield:"nivelsalarial",align:"center",width:200},{text:"Haber",datafield:"sueldo",filtertype:"number",cellsformat:"d",pinned:!1,width:70,cellsalign:"right",align:"center"},{text:"Gerencia",filtertype:"checkedlist",datafield:"gerencia_administrativa",filteritems:o.gerencias,width:220,align:"center",hidden:!1},{text:"Departamento",filtertype:"checkedlist",datafield:"departamento_administrativo",filteritems:o.departamentos,width:220,align:"center",hidden:!1},{text:"Condici&oacute;n",columntype:"textbox",filtertype:"checkedlist",datafield:"condicion",filteritems:o.condiciones,width:150,cellsalign:"center",align:"center",hidden:!1},{text:"Resoluci&oacute;n Organigrama",filtertype:"checkedlist",datafield:"resolucion_ministerial",align:"center",width:200},{text:"Resoluci&oacute;n Escala",filtertype:"checkedlist",datafield:"nivelsalarial_resolucion",align:"center",width:200}]}),$("#divGrillaParaSeleccionarCargo").off(),$("#divGrillaParaSeleccionarCargo").on("rowdoubleclick",function(e){var a=e.args,r=a.rowindex;if(0<=r){var i=$("#divGrillaParaSeleccionarCargo").jqxGrid("getrowdata",r);if(null!=i&&null!=i.id_cargo)agregarCargoSeleccionadoEnGrilla(i),$("#divNew").css("height","100%");else{var o="Debe seleccionar un cargo necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(o),$("#divMsjeNotificacionError").jqxNotification("open")}}else{var o="Debe seleccionar un cargo necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(o),$("#divMsjeNotificacionError").jqxNotification("open")}})}()}var rownumberrenderer=function(e,a,r,i,o,t){return"<div align='center'>"+(e+1)+"</div>"};function cargarUbicaciones(e){$("#ubicacion").jqxComboBox({selectedIndex:0,autoComplete:!0,enableBrowserBoundsDetection:!0,autoDropDownHeight:!0,promptText:"Seleccione una ubicacion",source:[{value:1,label:"OFICINA CENTRAL"},{value:2,label:"LÍNEA ROJA"},{value:3,label:"LÍNEA AMARILLA"},{value:4,label:"LÍNEA VERDE"}],height:22,width:"100%"})}function cargarDepartamentos(e){$("#departamento").jqxComboBox({enableBrowserBoundsDetection:!0,autoDropDownHeight:!0,promptText:"Seleccione un departamento o ciudad",source:[{value:0,label:"La Paz"},{value:1,label:"Cochabamba"},{value:2,label:"Sucre"},{value:3,label:"Oruro"},{value:4,label:"Potosí"},{value:5,label:"Santa Cruz"},{value:6,label:"Tarija"},{value:7,label:"Trinidad"},{value:8,label:"Cobija"}],height:22,width:"100%"})}function cargarAreasAdministrativas(e,r){$("#divAreas").hide(),$("#lstAreas").html("");var i=!1,o="";return 0<e&&$.ajax({url:"/relaborales/listareas",type:"POST",datatype:"json",async:!1,data:{id_padre:e},success:function(e){var a=jQuery.parseJSON(e);0<a.length&&($("#divAreas").show(),$("#lstAreas").append("<option value='0'>Seleccionar..</option>"),$.each(a,function(e,a){i=!0,o=r==a.id_area?"selected":"",$("#lstAreas").append("<option value="+a.id_area+" "+o+">"+a.unidad_administrativa+"</option>")}))}}),i}function cargarProcesos(e){$.ajax({url:"/relaborales/listprocesos",type:"POST",datatype:"json",data:{id_condicion:e},success:function(e){var a=jQuery.parseJSON(e);$("#lstProcesos").html(""),$("#lstProcesos").append("<option value='0'>Seleccionar..</option>"),$.each(a,function(e,a){$("#lstProcesos").append("<option value="+a.id+">"+a.codigo_proceso+"</option>")})}})}function cargaCategorias(e){$("#categoria").jqxComboBox({enableBrowserBoundsDetection:!0,autoDropDownHeight:!0,promptText:"Seleccione una categoria",source:[{value:1,label:"ADMINISTRATIVO"},{value:2,label:"TECNICO"},{value:3,label:"JURIDICO"}],height:22,width:"100%"})}function defineFechas(){$("#FechaIni").jqxDateTimeInput({enableBrowserBoundsDetection:!0,height:24,formatString:"dd-MM-yyyy"}),$("#FechaIncor").jqxDateTimeInput({enableBrowserBoundsDetection:!0,height:24,formatString:"dd-MM-yyyy"})}function agregarCargoSeleccionadoEnGrilla(e){var a=e.id_cargo,r=e.codigo,i=(e.id_finpartida,e.finpartida,e.id_resolucion_ministerial,e.resolucion_ministerial),o=e.id_condicion,t=e.condicion,n=e.id_organigrama,l=e.gerencia_administrativa,c=e.departamento_administrativo,s=e.nivelsalarial,d=e.cargo,u=e.sueldo,h=(e.nivelsalarial_resolucion_id,e.nivelsalarial_resolucion),v="";""!=e.gestion&&null!=e.gestion&&(v=e.gestion);e.correlativo;$("#tr_cargo_seleccionado").html("");var p="<td  class='text-center'><a class='btn btn-danger btnDescartarCargoSeleccionado' title='Descartar cargo seleccionado.' data-toggle='tooltip' data-original-title='Descartar' id='btn_"+a+"' alt='Descartar cargo para el contrato'>";p+="<i class='fa fa-times'></i></a></td>";var g="<td class='text-center'>"+r+"</td><td class='text-center'>"+v+"</td><td class='text-center'>"+i+"</td><td class='text-center'>"+h+"</td><td class='text-center'>"+t+"</td><td>"+l+"</td><td>"+c+"</td><td>"+s+"</td><td>"+d+"</td><td  class='text-right'>"+u+"</td>";$("#tr_cargo_seleccionado").append(p+g),$("#hdnIdCargoNuevoSeleccionado").val(a),$("#hdnIdOrganigramaSeleccionado").val(n),$("#hdnIdCondicionNuevaSeleccionada").val(o),$("#divProcesos").show();var m=cargarAreasAdministrativas(n,0);cargarProcesos(o),$("#popupGrillaCargo").modal("hide"),2==(o=parseInt(o))||3==o||7==o?($("#divNumContratos").show(),m?$("#lstAreas").focus():$("#txtNumContrato").focus(),$("#divFechasFin").show(),$("#FechaFin").jqxDateTimeInput({enableBrowserBoundsDetection:!0,height:24,formatString:"dd-MM-yyyy"})):m?$("#lstAreas").focus():$("#lstUbicaciones").focus(),$(".btnDescartarCargoSeleccionado").off(),$(".btnDescartarCargoSeleccionado").click(function(){$("#tr_cargo_seleccionado").html(""),$("#hdnIdCargoNuevoSeleccionado").val(0),$("#hdnIdOrganigramaSeleccionado").val(0),$("#hdnIdCondicionNuevaSeleccionada").val(0),$("#divNumContratos").hide(),$("#divProcesos").hide(),$("#divFechasFin").hide(),$(".msjs-alert").hide(),$(".div-new-relab").removeClass("has-error"),$("#helpErrorUbicaciones").html(""),$("#helpErrorProcesos").html(""),$("#helpErrorCategorias").html(""),$("#divUbicaciones").removeClass("has-error"),$("#divProcesos").removeClass("has-error"),$("#divCategorias").removeClass("has-error")})}function habilitarCamposParaNuevoRegistroDeRelacionLaboral(e,a){defineFechas()}function deshabilitarCamposParaNuevoRegistroDeRelacionLaboral(){$("#tr_cargo_seleccionado").html(""),$("#hdnIdPersonaSeleccionada").val(0),$("#NombreParaNuevoRegistro").html("")}function validaFormularioPorNuevoRegistro(){var e=!0,a="";$(".msjs-alert").hide(),limpiarMensajesErrorPorValidacionNuevoRegistro();var r=$("#hdnIdCondicionNuevaSeleccionada").val();r=parseInt(r);var i=$("#lstUbicaciones").val(),o=$("#lstProcesos").val(),t=($("#lstCategorias").val(),$("#FechaIni").jqxDateTimeInput("getText")),n=$("#FechaIncor").jqxDateTimeInput("getText"),l=null;2!=r&&3!=r&&7!=r||(l=$("#FechaFin").jqxDateTimeInput("getText"));var c=$("#hdnIdCargoNuevoSeleccionado").val();0!=c&&null!=c||($("#divMsjeError").show(),$("#divMsjeError").addClass("alert alert-danger alert-dismissable"),$("#aMsjeError").html("Debe seleccionar el cargo necesariamente."),e=!1),r=parseInt(r);var s=null;null!=t&&""!=t||(e=!1,a="Debe introducir la fecha de inicio.",$("#divFechasIni").addClass("has-error"),$("#helpErrorFechasIni").html(a),null==s&&(s=$("#FechaIni"))),null!=n&&""!=n||(e=!1,a="Debe introducir la fecha de incorporaci&oacute;n.",$("#divFechasIncor").addClass("has-error"),$("#helpErrorFechasIncor").html(a),null==s&&(s=$("#FechaIncor")));var d="-";if(procesaTextoAFecha(n,d)<procesaTextoAFecha(t,d)&&(e=!1,a="La fecha de incorporaci&oacute;n debe ser igual o superior a la fecha de inicio.",$("#divFechasIni").addClass("has-error"),$("#divFechasIncor").addClass("has-error"),$("#helpErrorFechasIni").html(a),$("#helpErrorFechasIncor").html(a),null==s&&(s=$("#FechaIni"))),2==r||3==r||7==r){""!=l&&null!=l||(e=!1,a="Debe introducir la fecha de finalizaci&oacute;n del contrato.",$("#divFechasFin").show(),$("#divFechasFin").addClass("has-error"),$("#helpErrorFechasFin").html(a),null==s&&(s=$("#FechaFin")));d="-";procesaTextoAFecha(l,d)<procesaTextoAFecha(t,d)&&(e=!1,a="La fecha de inicio no puede ser superior a la fecha de finalizaci&oacute;n.",$("#divFechasIni").show(),$("#divFechasIni").addClass("has-error"),$("#helpErrorFechasIni").html(a),$("#divFechasFin").show(),$("#divFechasFin").addClass("has-error"),$("#helpErrorFechasFin").html(a),null==s&&(s=$("#FechaFin"))),procesaTextoAFecha(l,d)<procesaTextoAFecha(n,d)&&(e=!1,a="La fecha de incorporaci&oacute;n no puede ser superior a la fecha de finalizaci&oacute;n.",$("#divFechasIncor").show(),$("#divFechasIncor").addClass("has-error"),$("#helpErrorFechasIncor").html(a),$("#divFechasFin").show(),$("#divFechasFin").addClass("has-error"),$("#helpErrorFechasFin").html(a),null==s&&(s=$("#FechaFin")))}return 2!=r&&3!=r&&7!=r||(null!=$("#txtNumContrato").val()&&""!=$("#txtNumContrato").val()||(e=!1,a="Debe introducir en n&uacute;mero de contrato necesariamente.",$("#divNumContratos").addClass("has-error"),$("#helpErrorNumContratos").html(a),null==s&&(s=$("#txtNumContrato"))),null!=l&&""!=l||(e=!1,a="Debe introducir la fecha de finalizaci&oacute;n del contrato.",$("#divFechasFin").addClass("has-error"),$("#helpErrorFechasFin").html(a),null==s&&(s=$("#FechaFin")))),""!=i&&null!=i||(e=!1,a="Debe seleccionar la ubicaci&oacute;n de trabajo necesariamente.",$("#divUbicaciones").addClass("has-error"),$("#helpErrorUbicaciones").html(a),null==s&&(s=$("#lstUbicaciones"))),0!=o&&""!=o&&null!=o||(e=!1,a="Debe seleccionar el proceso correspondiente necesariamente.",$("#divProcesos").addClass("has-error"),$("#helpErrorProcesos").html(a),null==s&&(s=$("#lstProcesos"))),$("#formNuevo").jqxValidator({focus:!1}),$("#formNuevo").jqxValidator({hintType:"label",rules:[{input:"#FechaIni",message:"Debe registrar la fecha de inicio!",action:"keyup, blur",rule:"required"},{input:"#FechaIncor",message:"Debe registrar la fecha de incorporación!",action:"keyup, blur",rule:"required"},{input:"#FechaFin",message:"Debe registrar la fecha de finalización!",action:"keyup, blur",rule:"required"}]}),null!=s&&s.focus(),e}function limpiarMensajesErrorPorValidacionNuevoRegistro(){$("#helpErrorUbicaciones").html(""),$("#helpErrorProcesos").html(""),$("#helpErrorCategorias").html(""),$("#helpErrorItems").html(""),$("#helpErrorNumContratos").html(""),$("#helpErrorFechasIni").html(""),$("#helpErrorFechasIncor").html(""),$("#helpErrorFechasFin").html(""),$("#divUbicaciones").removeClass("has-error"),$("#divProcesos").removeClass("has-error"),$("#divCategorias").removeClass("has-error"),$("#divItems").removeClass("has-error"),$("#divNumContratos").removeClass("has-error"),$("#divFechasIni").removeClass("has-error"),$("#divFechasIncor").removeClass("has-error"),$("#divFechasFin").removeClass("has-error")}function limpiarFormularioNuevoRegistro(e){var a="";2==e&&(a="Editar"),$("#txtNumContrato"+a).val(""),$("#lstUbicaciones"+a).val(""),$("#lstProcesos"+a).val(""),$("#txtObservacion"+a).val("")}function guardarNuevoRegistro(){var r=0,e=0;null!=$("#lstAreas").val()&&(e=$("#lstAreas").val());var a=$("#hdnIdPersonaSeleccionada").val(),i=$("#hdnIdCargoNuevoSeleccionado").val(),o=$("#lstUbicaciones").val(),t=$("#lstProcesos").val(),n=$("#hdnIdCondicionNuevaSeleccionada").val(),l="",c=null;if(2==n||3==n||7==n){l=$("#txtNumContrato").val();c=$("#FechaFin").jqxDateTimeInput("getText")}var s=$("#FechaIni").jqxDateTimeInput("getText"),d=$("#FechaIncor").jqxDateTimeInput("getText"),u=$("#txtObservacion").val();return 0<a&&0<i&&$.ajax({url:"/relaborales/save/",type:"POST",datatype:"json",async:!1,cache:!1,data:{id:0,id_persona:a,id_cargo:i,num_contrato:l,id_area:e,id_ubicacion:o,id_regional:1,id_procesocontratacion:t,fecha_inicio:s,fecha_incor:d,fecha_fin:c,observacion:u},success:function(e){var a=jQuery.parseJSON(e);1==a.result?(r=parseInt(a.id_r),$("#divMsjePorSuccess").html(""),$("#divMsjePorSuccess").append(a.msj),$("#divMsjeNotificacionSuccess").jqxNotification("open"),$("#jqxTabs").jqxTabs("enableAt",0),$("#jqxTabs").jqxTabs("disableAt",1),deshabilitarCamposParaNuevoRegistroDeRelacionLaboral(),$("#jqxgrid").jqxGrid("updatebounddata")):0==a.result?($("#divMsjePorWarning").html(""),$("#divMsjePorWarning").append(a.msj),$("#divMsjeNotificacionWarning").jqxNotification("open")):($("#divMsjePorError").html(""),$("#divMsjePorError").append(a.msj),$("#divMsjeNotificacionError").jqxNotification("open"),r=0)},error:function(){alert("Se ha producido un error Inesperado")}}),r}